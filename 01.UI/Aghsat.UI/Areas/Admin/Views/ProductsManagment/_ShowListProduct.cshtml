

@using Microsoft.Ajax.Utilities
@model IEnumerable<Aghsat.ViewModel.Product.Product_List_vm>
<div class="border border-dark  uk-box-shadow-hover-large bg-light">

  
    <div class=" table-responsive  bg-light p-3 ">

        <div class="float-right   dt-buttons btn-group ">
            @Ajax.ActionLink("جدید", MVC.Admin.ProductsManagment.Create(), new AjaxOptions
       {
           UpdateTargetId = "Modal_Body", // <-- DOM element ID to update
           InsertionMode = InsertionMode.Replace, // <-- Replace the content of DOM element
           HttpMethod = "GET", // <-- HTTP method
           OnComplete = "ShowModal"
       }, new {@class = "btn btn-info bg-info rounded-0 " })
        </div>
        @{
            if (Model != null && Model.Any())
            {
                <table id="dtCategory" style="width: 100%" class="table table-dark  data-Table  table-hover  table-bordered text-center">
                    <thead>
                        <tr>
                            <th>
                                @Html.DisplayNameFor(model => model.Name)
                            </th>
                            <th>
                                @Html.DisplayNameFor(row => row.CategoryName)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.UnitName)
                            </th>

                            <th>
                                @Html.DisplayNameFor(model => model.ProductDate)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.MainImage)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.CreateDate)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.ModifeDate)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.IsDeleted)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.IsActive)
                            </th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            <tr>

                                <td>
                                    @Html.DisplayFor(modelItem => item.Name)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.CategoryName)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.UnitName)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.ProductDate)
                                </td>
                                <td uk-lightbox="animation: slide">
                                    @*@Html.DisplayFor(modelItem => item.MainImage)*@

                                    @if (!item.MainImage.IsNullOrWhiteSpace())
                                    {
                                        <a class="uk-inline" href="~/Content/Image/ProductsImage/@item.MainImage" data-caption="@item.Name">
                                            <img class=" " style="width: 50px;height: 50px;" src="~/Content/Image/ProductsImage/@item.MainImage" alt="@item.Name">
                                        </a>
                                    }
                                    else
                                    {
                                        <p>عکسی ثبت نشده است</p>
                                    }

                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.CreateDate)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.ModifeDate)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.IsDeleted)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.IsActive)
                                </td>
                                <td>
                                    <span uk-tooltip="title: مشاهده جزیئات ; delay: 50">
                                        @* @Html.ActionLink("Details", "Details", new { id = item.Id })*@
                                        @Ajax.ActionLink(" ", MVC.Admin.ProductsManagment.Details(item.Id), new AjaxOptions
                                        {
                                            UpdateTargetId = "Modal_Body", // <-- DOM element ID to update
                                            InsertionMode = InsertionMode.Replace, // <-- Replace the content of DOM element
                                            HttpMethod = "GET", // <-- HTTP method
                                            OnComplete = "ShowModal"
                                        }, new {@class = "uk-button   uk-button-default  uk-button-small  bg-light  fa fa-list-ul" })
                                    </span>

                                    <span uk-tooltip="title: ویرایش ; delay: 50">

                                        @Ajax.ActionLink(" ", MVC.Admin.ProductsManagment.Edit(item.Id), new AjaxOptions
                                        {
                                            UpdateTargetId = "Modal_Body", // <-- DOM element ID to update
                                            InsertionMode = InsertionMode.Replace, // <-- Replace the content of DOM element
                                            HttpMethod = "GET", // <-- HTTP method
                                            OnComplete = "ShowModal"
                                        }, new {@class = "uk-button uk-button-default   bg-light  uk-button-small  fa fa-edit " })
                                    </span>

                                    <span uk-tooltip="title: حذف ; delay: 50">
                                        @Ajax.ActionLink(" ", MVC.Admin.ProductsManagment.ConfirmDelete(item.Id), new AjaxOptions
                                        {
                                            UpdateTargetId= "Modal_Body", // <-- DOM element ID to update
                                            InsertionMode = InsertionMode.Replace, // <-- Replace the content of DOM element
                                            HttpMethod = "GET" ,// <-- HTTP method
                                            OnComplete = "ShowModal"

                                        }, new {@class = "uk-button uk-button-default bg-light  uk-button-small  fa fa-trash" })


                                    </span>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
            else
            {
                <br />

                <div uk-alert class="   bg-secondary text-white  text-right">
                    <a class="uk-alert-close" uk-close></a>
                    <p class="mb-2">
                        <span class="fa fa-exclamation-circle fa-2x"></span>
                        هیچ محصولی ثبت نشده است
                    </p>
                </div>
            }
        }

    </div>
</div>

<script>

    $(document).ready(function () {
        // $('#dtCategory').dataTable({
        $('table.data-Table').dataTable({
            retrieve: true,
            dom: 'Bfrtip',
            buttons: [
                'copy', 'csv', 'excel', 'print'
            ],

            "language": {
                "url": "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Persian.json"
            }
        });
    });

</script>

